<mxfile host="app.diagrams.net" modified="2023-12-29T09:48:23.955Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" etag="dgAAW6nAL69ferx_v0Nl" version="22.1.11" type="github">
  <diagram name="第 1 页" id="1hYo64LuMpDYzzGd4I8e">
    <mxGraphModel dx="1674" dy="786" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="2336" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="4XoDtmQWzFF1k-0LZuOs-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="4XoDtmQWzFF1k-0LZuOs-1" target="4XoDtmQWzFF1k-0LZuOs-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4XoDtmQWzFF1k-0LZuOs-1" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="69" y="231" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4XoDtmQWzFF1k-0LZuOs-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="4XoDtmQWzFF1k-0LZuOs-2" target="4XoDtmQWzFF1k-0LZuOs-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-2" value="第一步&lt;br&gt;url(带有orgID)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="4XoDtmQWzFF1k-0LZuOs-6" vertex="1" connectable="0">
          <mxGeometry x="0.0437" y="2" relative="1" as="geometry">
            <mxPoint x="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4XoDtmQWzFF1k-0LZuOs-2" value="添加语义库" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="189" y="231" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4XoDtmQWzFF1k-0LZuOs-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="4XoDtmQWzFF1k-0LZuOs-5" target="4XoDtmQWzFF1k-0LZuOs-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-3" value="第二步" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="4XoDtmQWzFF1k-0LZuOs-8" vertex="1" connectable="0">
          <mxGeometry x="-0.0414" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="4XoDtmQWzFF1k-0LZuOs-5" target="4XoDtmQWzFF1k-0LZuOs-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-11" value="配置信息字段" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-1" vertex="1" connectable="0">
          <mxGeometry x="0.1481" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="4XoDtmQWzFF1k-0LZuOs-5" target="arsLk9QwE6Tpv6ynl3g6-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-10" value="&lt;font style=&quot;font-size: 11px;&quot;&gt;交互形式&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-9" vertex="1" connectable="0">
          <mxGeometry x="-0.1481" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4XoDtmQWzFF1k-0LZuOs-5" value="配置语义库&lt;br&gt;启用/停用" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="433" y="197.5" width="120" height="39" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="4XoDtmQWzFF1k-0LZuOs-7" target="arsLk9QwE6Tpv6ynl3g6-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-35" value="配置信息" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-16" vertex="1" connectable="0">
          <mxGeometry x="-0.04" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="4XoDtmQWzFF1k-0LZuOs-7" target="arsLk9QwE6Tpv6ynl3g6-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-34" value="交互形式" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-18" vertex="1" connectable="0">
          <mxGeometry x="-0.193" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="4XoDtmQWzFF1k-0LZuOs-7" target="arsLk9QwE6Tpv6ynl3g6-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-36" value="语义库和语义其余操作" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-31" vertex="1" connectable="0">
          <mxGeometry x="-0.2969" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4XoDtmQWzFF1k-0LZuOs-7" value="配置语义&lt;br&gt;删除&lt;br&gt;同步状态" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="785" y="189" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4XoDtmQWzFF1k-0LZuOs-9" value="选择主题场景(topic)&lt;br&gt;选择数据库(datasource_id)&lt;br&gt;选择表(sql)或者sql语句二选一,sql语句给出表和字段的提示&lt;br&gt;描述(description)" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="332.94" y="73" width="320.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-4" value="语义名称(display_name --- string)&lt;br&gt;语义描述(description --- string)&lt;br&gt;语义类型(term_type --- string measure | dimensions | join)&lt;br&gt;语义别名(alias --- array[string])&lt;br&gt;语义配置(config --- map) {&lt;br&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;字段操作(sql --- string)给出提示&lt;br&gt;主键配置(primary_key --- boolean)&lt;br&gt;tips:如果是通过这个字段来join得设置为主键&lt;br&gt;格式(format --- string)&lt;br&gt;同步状态(sync_value_status ---- string)&lt;/blockquote&gt;}" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="693" y="5" width="313" height="165" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-8" value="交互形式: 数据表是通过链接数据源拉出来信息&lt;br&gt;备注: 这里不拉出数据表的信息&lt;br&gt;和主题创建场景类似" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="361.5" y="301" width="263" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-12" target="arsLk9QwE6Tpv6ynl3g6-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-12" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="63" y="539" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-14" target="arsLk9QwE6Tpv6ynl3g6-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-14" value="查看语义库/语义" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="235" y="539" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-17" value="交互形式: 拉出表的字段信息和计算函数进行config的配置" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="713.5" y="306" width="263" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-20" target="arsLk9QwE6Tpv6ynl3g6-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-39" value="语义结构暂时不暴露" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-23" vertex="1" connectable="0">
          <mxGeometry x="-0.115" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-20" value="语义库和语义二级表&lt;br&gt;清楚查看语义库下的语义表信息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="444" y="539" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-22" target="arsLk9QwE6Tpv6ynl3g6-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-22" target="arsLk9QwE6Tpv6ynl3g6-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-38" value="YAML/JavaScript" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-29" vertex="1" connectable="0">
          <mxGeometry x="-0.1684" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-22" value="语义结构(Yaml和JavaScript)" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="726" y="539" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-26" value="&lt;div&gt;cube(`orders`, {&lt;/div&gt;&lt;div&gt;&amp;nbsp; // ...&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; measures: {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; count: {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; sql: `id`,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; type: `count`,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; },&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; total_amount: {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; sql: `amount`,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; type: `sum`,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; },&lt;/div&gt;&lt;div&gt;&amp;nbsp; },&lt;/div&gt;&lt;div&gt;});&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=0;align=left;" parent="1" vertex="1">
          <mxGeometry x="1068.5" y="601" width="109.5" height="238" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-28" value="&lt;div&gt;cubes:&lt;/div&gt;&lt;div&gt;&amp;nbsp; - name: orders&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; # ...&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; measures:&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - name: count&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; sql: id&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; type: count&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - name: total_amount&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; sql: amount&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; type: sum&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1058" y="342" width="130.5" height="207" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-30" value="删除(不删除语义库, 语义可以删除)&lt;br&gt;更新&lt;br&gt;创建语义库和语义分开" style="whiteSpace=wrap;html=1;rounded=0;align=left;" parent="1" vertex="1">
          <mxGeometry x="1129" y="189" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-44" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-40" target="arsLk9QwE6Tpv6ynl3g6-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-40" value="主题" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="241.5" y="724" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-43" value="增加data-model&lt;br&gt;多选" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="444" y="724" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-45" target="arsLk9QwE6Tpv6ynl3g6-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-47" value="配置主题" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-46" vertex="1" connectable="0">
          <mxGeometry x="-0.0976" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-45" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="63" y="724" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-48" value="需要补充接口&lt;br&gt;1. 全局data-model接口(管理平台)&lt;br&gt;2. 创建data-model接口topic-id在request-body里面(管理平台)&lt;br&gt;3. data-model启用停用接口&lt;br&gt;4. 主题增加data-model字段" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1289" y="371" width="292" height="114" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-49" value="&amp;nbsp;CDH Hadoop 3.3.4" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="585" y="1236" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-50" value="ambari hadoop 3.3.4(国内开源团队)&lt;br&gt;yarn submit 信息&lt;br&gt;&amp;nbsp;FsTrace" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="471" y="1372" width="293" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-52" value="&amp;nbsp;CDH Hadoop 2.x" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="1083" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-53" target="arsLk9QwE6Tpv6ynl3g6-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-53" target="arsLk9QwE6Tpv6ynl3g6-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-53" value="hadoop jar 2.x" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="258" y="1182" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.633;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="arsLk9QwE6Tpv6ynl3g6-53" target="arsLk9QwE6Tpv6ynl3g6-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arsLk9QwE6Tpv6ynl3g6-56" value="getLog" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="arsLk9QwE6Tpv6ynl3g6-55" vertex="1" connectable="0">
          <mxGeometry x="0.2268" y="-3" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-1" value="ambari hadoop 3.3.4&lt;br&gt;修改的内容" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="86" y="1890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-2" value="task-controller&lt;br&gt;hadoop" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="264" y="1743" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-3" value="workflow-service&lt;br&gt;hadoop" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="264" y="1868" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-4" value="executor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="264" y="1990" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-5" target="tBXLiaRZD2iZ0NIXH2bB-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-34" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;K8S的路线&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-33">
          <mxGeometry x="0.0355" y="-1" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-5" value="license plus sdk" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="695" y="2575" width="210" height="135" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-6" value="marionette" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="128.5" y="2532" width="285.5" height="240" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-7" target="tBXLiaRZD2iZ0NIXH2bB-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-7" value="新创建、更新、暂停和删除时" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="215" y="2551" width="181.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-8" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.005;entryY=0.57;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-7" target="tBXLiaRZD2iZ0NIXH2bB-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-9" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;调用quota 接口进行分配，释放和更新&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-8">
          <mxGeometry x="-0.0589" y="-2" relative="1" as="geometry">
            <mxPoint x="2" y="12" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.298;entryY=1.05;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-5" target="tBXLiaRZD2iZ0NIXH2bB-7">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="269" y="2652" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-20" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;获取license健康状态和资源剩余情况是否充足&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-19">
          <mxGeometry x="0.209" y="-3" relative="1" as="geometry">
            <mxPoint x="149" y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-21" target="tBXLiaRZD2iZ0NIXH2bB-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-21" value="已有的notebook环境，因为在notebook-env表中已经存起来了资源信息的消耗" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="181" y="2690" width="217" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-22" value="会在notebook-env表中存和更新这部分license信息&lt;br&gt;保证license信息是最新的&lt;br&gt;{licenseName: &#39;studio&#39;, cpu: 1, memort:4,... }" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="160.25" y="2367" width="291" height="95" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-24" value="[{&quot;resourceType&quot;:&quot;CPU&quot;,&quot;limits&quot;:&quot;1&quot;,&quot;extension&quot;:null},{&quot;resourceType&quot;:&quot;MEMORY&quot;,&quot;limits&quot;:&quot;4Gi&quot;,&quot;extension&quot;:null}]&lt;br&gt;判断是否存在license信息，然后去轮询更新资源到license中" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="111.5" y="2843" width="356" height="97" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-27" target="tBXLiaRZD2iZ0NIXH2bB-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="649" y="2482" />
              <mxPoint x="413" y="2482" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-31" value="控制走不走license逻辑，默认走" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-30">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-27" value="configmap中设置一个参数license,控制走不走license逻辑，不设置默认是走license逻辑" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="523" y="2374" width="252" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-32" target="tBXLiaRZD2iZ0NIXH2bB-35">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1237" y="2567" />
              <mxPoint x="1031" y="2567" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-49" value="license_name" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-42">
          <mxGeometry x="0.3378" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-32" target="tBXLiaRZD2iZ0NIXH2bB-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-50" value="app_name" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-43">
          <mxGeometry x="0.0621" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-32" target="tBXLiaRZD2iZ0NIXH2bB-37">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1237" y="2527" />
              <mxPoint x="1324" y="2527" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-51" value="resource_id" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-44">
          <mxGeometry x="0.3667" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-32" target="tBXLiaRZD2iZ0NIXH2bB-38">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1237" y="2563" />
              <mxPoint x="1507" y="2563" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-52" value="metric_name" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-45">
          <mxGeometry x="-0.0765" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-32" target="tBXLiaRZD2iZ0NIXH2bB-41">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1237" y="2727" />
              <mxPoint x="1585" y="2727" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-54" value="labels" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-48">
          <mxGeometry x="-0.7077" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-55" value="status" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-48">
          <mxGeometry x="0.0348" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-32" value="在license-controller库中records表增加一条记录" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="1084" y="2599" width="306" height="87" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-35" value="license_name&lt;br&gt;studio || kernel" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="971" y="2446" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-36" value="app_name&lt;br&gt;marionatte" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1109" y="2446" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-37" value="resource_id&lt;br&gt;资源的唯一标识 pas是部署ID(deploy里面的labels中有deploy的ID值)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1247" y="2446" width="154" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-38" value="metric_name&lt;br&gt;resource_requests_cpu_cores&lt;br&gt;resource_requests_mem_cores&lt;br&gt;resource_requests_gpu_cores&lt;br&gt;resource_requests_vgpu_cores&lt;br&gt;resource_requests_npu_cores" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1415" y="2407" width="184" height="96" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-39" value="value&lt;br&gt;metric_name类型的具体值" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="971" y="2769" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-40" value="labels&lt;br&gt;{&quot;aios.4pd.io/class&quot;:&quot;nb-batch-predictor&quot;,&quot;aios.4pd.io/platform&quot;:&quot;K8S&quot;,&quot;aios.4pd.io/sage-namespace&quot;:&quot;prophet-resource-4pdadmin&quot;,&quot;aios.4pd.io/service-name&quot;:&quot;50494154-0ad8-4f7e-a307-342561574852&quot;,&quot;aios.4pd.io/service-type&quot;:&quot;Instance&quot;,&quot;aios.4pd.io/user&quot;:&quot;4pdadmin&quot;,&quot;aios.4pd.io/workspace-id&quot;:&quot;1&quot;}" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="1109" y="2769" width="398" height="115" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-41" value="status&lt;br&gt;released-释放&lt;br&gt;allocated-分配&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1525" y="2769" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.558;entryY=0.033;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-32" target="tBXLiaRZD2iZ0NIXH2bB-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-53" value="value" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="tBXLiaRZD2iZ0NIXH2bB-46">
          <mxGeometry x="0.0388" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tBXLiaRZD2iZ0NIXH2bB-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.52;entryY=0.026;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="tBXLiaRZD2iZ0NIXH2bB-32" target="tBXLiaRZD2iZ0NIXH2bB-40">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1237" y="2727" />
              <mxPoint x="1316" y="2727" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
